# @vbird-core

系统一些比较基础的SDK和UI组件库，该目录后续完善后，可能会迁移出去或者发布到npm，请勿将任何业务逻辑和业务包放在该目录。

## package.json

### 一、sideEffects 副作用

在 package.json 中的 sideEffects 属性用于告诉构建工具，在打包过程中哪些文件具有副作用（side effects），哪些文件没有副作用。副作用是指当导入一个模块时，除了导出模块外，该模块是否会对其他模块或全局环境产生额外的影响，例如修改全局变量、修改其他模块的状态、发起网络请求等。

#### 设置 sideEffects 的作用

1. 优化 Tree Shaking 过程：

- `Tree Shaking` 是一种优化技术，旨在消除未使用的代码，以减小打包文件的大小。
- 当设置 `sideEffects: false` 时，构建工具会认为该包中的所有文件都没有副作用。这意味着，如果在代码中没有使用某个模块的导出，那么在打包时，该模块将被视为“死代码”，会被安全地从最终的构建产物中移除，从而优化代码体积。
- 例如，如果一个包是一个纯函数库，所有函数都是纯函数，没有任何副作用，那么在 `package.json` 中设置 `sideEffects: false`可以让构建工具放心地移除未使用的代码，提高打包性能和效率。

2. 精确标记有副作用的文件：

- 当 `sideEffects` 是一个数组时，其中的元素是具有副作用的文件的相对路径。
- 这允许你明确指定哪些文件在导入时会产生副作用，即使这些文件可能没有被代码直接使用，构建工具也不会将其移除。
- 例如，假设你有一个 CSS 文件在导入时会对全局样式产生影响，即使你没有在代码中显式使用该文件中的导出，你可以将其添加到 `sideEffects` 数组中，确保在打包时不会因为 `Tree Shaking` 而丢失该文件。

#### 使用示例

1.  设置为 false

```json
{
	"name": "my-package",
	"sideEffects": false
}
```

在这种情况下，该包内的所有文件都被认为是无副作用的。这通常适用于纯函数库或只导出纯函数的包。

2.  设置为数组

```json
{
	"name": "my-package",
	"sideEffects": ["./src/globalStyles.css", "./src/init.js"]
}
```

这里，./src/globalStyles.css 可能是一个全局样式文件，导入时会修改全局样式，而 ./src/init.js 可能会在导入时执行一些初始化操作，如注册全局变量或监听全局事件，因此需要明确标记为有副作用的文件。
